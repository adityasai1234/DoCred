"use strict";(()=>{var e={};e.id=540,e.ids=[540],e.modules={8013:e=>{e.exports=require("mongodb")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2039:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>v,patchFetch:()=>x,requestAsyncStorage:()=>g,routeModule:()=>l,serverHooks:()=>f,staticGenerationAsyncStorage:()=>m});var n={};r.r(n),r.d(n,{GET:()=>d,POST:()=>c});var a=r(9303),o=r(8716),s=r(670),i=r(7070),u=r(2021),p=r(2087);async function d(e){try{let{searchParams:t}=new URL(e.url),r=Number.parseInt(t.get("page")||"1"),n=Number.parseInt(t.get("limit")||"10"),a=(r-1)*n,o=await (0,u.mU)(),[s,d]=await Promise.all([o.find({}).sort({created_at:-1}).skip(a).limit(n).toArray(),o.countDocuments({})]);return i.NextResponse.json({songs:s.map(p.d),pagination:{page:r,limit:n,total:d,totalPages:Math.ceil(d/n)}})}catch(e){return i.NextResponse.json({error:e.message},{status:500})}}async function c(e){try{if(!(await e.formData()).get("file"))return i.NextResponse.json({error:"No file uploaded"},{status:400});return i.NextResponse.json({message:"Song uploaded (placeholder)"})}catch(e){return i.NextResponse.json({error:e.message},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/songs/route",pathname:"/api/songs",filename:"route",bundlePath:"app/api/songs/route"},resolvedPagePath:"/workspaces/Vibe-loop/app/api/songs/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:g,staticGenerationAsyncStorage:m,serverHooks:f}=l,v="/api/songs/route";function x(){return(0,s.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:m})}},2087:(e,t,r)=>{r.d(t,{d:()=>n});function n(e){return{...e,id:e._id.toString(),_id:e._id.toString(),created_at:e.created_at,updated_at:e.updated_at}}},2021:(e,t,r)=>{let n;r.d(t,{mU:()=>i});var a=r(8013);if(!process.env.MONGODB_URI)throw Error('Invalid/Missing environment variable: "MONGODB_URI"');let o=process.env.MONGODB_URI;async function s(){return(await n).db("musicapp")}async function i(){return(await s()).collection("songs")}n=new a.MongoClient(o,{}).connect()}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[276,972],()=>r(2039));module.exports=n})();